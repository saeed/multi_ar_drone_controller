<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Up and Away Testbed Complete Documentation: control/CHeli.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Up and Away Testbed Complete Documentation
   &#160;<span id="projectnumber">Version 1.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">control/CHeli.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="CHeli_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00008"></a>00008 <span class="comment">/*</span>
<a name="l00009"></a>00009 <span class="comment"> * Created on 2010 by Tom Krajnik</span>
<a name="l00010"></a>00010 <span class="comment"> * This class provides a basic interface to the AR-drone </span>
<a name="l00011"></a>00011 <span class="comment"> * it envelopes the at commands, navdata and stream from ARDrone original SDK</span>
<a name="l00012"></a>00012 <span class="comment"> * the helidata structure (check app.h) contains the drone status </span>
<a name="l00013"></a>00013 <span class="comment"> */</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="preprocessor">#include &quot;stdio.h&quot;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;<a class="code" href="CRawImage_8h.html" title="A class for representing images by Tom Krajnik.">CRawImage.h</a>&quot;</span> 
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;<a class="code" href="CImageClient_8h.html" title="The class reponsible for getting images from the drone and saving them as bmp files [Fix Me !! - Save...">CImageClient.h</a>&quot;</span> 
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;<a class="code" href="ATCmd_8h.html" title="The class reponsible for sending AT commands to the drone.">ATCmd.h</a>&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="navdataC_8h.html" title="The class reponsible for getting navdata information from the drone.">navdataC.h</a>&quot;</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="keyword">typedef</span> <span class="keyword">struct</span>{
<a name="l00023"></a>00023     <span class="keywordtype">int</span> axis[6];
<a name="l00024"></a>00024     <span class="keywordtype">bool</span> buttons[11];
<a name="l00025"></a>00025 }TJoyState;
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 
<a name="l00030"></a>00030 
<a name="l00033"></a><a class="code" href="classCHeli.html">00033</a> <span class="keyword">class </span><a class="code" href="classCHeli.html" title="The class provides a basic interface to the AR-drone it envelopes the at commands, navdata and stream from ARDrone original SDK.">CHeli</a>
<a name="l00034"></a>00034 {
<a name="l00035"></a>00035 <span class="keyword">private</span>:
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="keyword">public</span>:
<a name="l00039"></a>00039 
<a name="l00045"></a>00045     <a class="code" href="classCHeli.html#ac55104bbf2be97da8b0209f1a5138de7" title="The constructor which creates instance of ATCmd, NavadataC and CImageClient.">CHeli</a>(<span class="keywordtype">char</span> * dIP, <span class="keywordtype">char</span>* dName, <span class="keywordtype">int</span> port);
<a name="l00046"></a>00046     <a class="code" href="classCHeli.html#a15b400cdc6dc977411ff8ece8cd2646f">~CHeli</a>();
<a name="l00047"></a>00047 
<a name="l00049"></a>00049     <span class="keywordtype">void</span> <a class="code" href="classCHeli.html#a3e5daf0af5e3ba3a1e8905820c8ea684" title="resets the drone state, recalibrates sensors and takes off">takeoff</a>();             
<a name="l00050"></a>00050 
<a name="l00052"></a>00052     <span class="keywordtype">void</span> <a class="code" href="classCHeli.html#abd1991e28b99334c5eb25ea4893dfc51" title="lands the drone">land</a>();
<a name="l00053"></a>00053 
<a name="l00055"></a>00055     <span class="keywordtype">void</span> <a class="code" href="classCHeli.html#a54ff0c749e347a03a031f260a81ffc03" title="chooses the camera - 0-front, 1-bottom, 2,3-picture in picture mode">switchCamera</a>(<span class="keywordtype">int</span> camera);      
<a name="l00056"></a>00056 
<a name="l00058"></a>00058     <span class="keywordtype">int</span> <a class="code" href="classCHeli.html#a895853842b62c698732760127de4b906" title="fills the &quot;image&quot; structure with the latest captured image, returns 0 (useless now and replaced by CI...">renewImage</a>(<a class="code" href="classCRawImage.html" title="Simple image class by Tom Krajnik.">CRawImage</a>* image);   
<a name="l00059"></a>00059 
<a name="l00061"></a>00061     <span class="keywordtype">void</span> <a class="code" href="classCHeli.html#a0ef32e5e05621a0224f5e2c5fd27dac6" title="sets the pitch, roll, yaw and vertical speed which are used to control all drone motion. Refer to google for more details on how to control the drone using angular velocities.">setAngles</a>(<span class="keywordtype">float</span> pitch, <span class="keywordtype">float</span> roll,<span class="keywordtype">float</span> yaw,<span class="keywordtype">float</span> vertical);
<a name="l00063"></a><a class="code" href="classCHeli.html#ad4f55cbb0888c59444cc71ab0c52166a">00063</a>     <a class="code" href="classNavdataC.html" title="The class the represents NAVData communiction with a drone. [Fix Me !! - This class&#39;s implementation ...">NavdataC</a> * <a class="code" href="classCHeli.html#ad4f55cbb0888c59444cc71ab0c52166a" title="NavdataC instance used by others to query the readings from the drone&#39;s sensors.">myNavdataReader</a>; 
<a name="l00064"></a>00064 <span class="keyword">private</span>:
<a name="l00065"></a>00065     <span class="comment">//closes communication with the drone </span>
<a name="l00066"></a>00066     <span class="keywordtype">void</span> close();           
<a name="l00067"></a>00067     <span class="keywordtype">bool</span> landed;
<a name="l00068"></a>00068     <span class="keywordtype">int</span> imageWidth,imageHeight;
<a name="l00069"></a>00069     <a class="code" href="classCImageClient.html" title="The class the is repsonsible for receiving images from the drone.">CImageClient</a> *client;
<a name="l00070"></a>00070     <a class="code" href="classCRawImage.html" title="Simple image class by Tom Krajnik.">CRawImage</a> *image;
<a name="l00071"></a>00071     sem_t imageSem;
<a name="l00072"></a>00072 
<a name="l00073"></a>00073     <a class="code" href="classATCmd.html" title="The class the represents AT commands communiction to a drone.">ATCmd</a> * myATCmdr;
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 };
<a name="l00076"></a>00076 
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 17 2014 15:34:47 for Up and Away Testbed Complete Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
